function chpwd () { ls }

function git (){ hub "$@" }

function bcd () {
  cd -P `ruby -rubygems -rbundler -e "Bundler.load.specs.each{|s| puts s.full_gem_path if s.name == '${1}'}"`
}

function bag () {
  ag "$@" `bundle show --paths`
}

function peco-src () {
    local selected_dir=$(ghq list --full-path | peco --query "$LBUFFER")
    if [ -n "$selected_dir" ]; then
        BUFFER="cd ${selected_dir}"
        zle accept-line
    fi
    zle clear-screen
}

function peco-select-history() {
    local tac
    if which tac > /dev/null; then
        tac="tac"
    else
        tac="tail -r"
    fi
    BUFFER=$(history -n 1 | \
        eval $tac | \
        peco --query "$LBUFFER")
    CURSOR=$#BUFFER
    zle clear-screen
}

function gpi () {
  [ "$#" -eq 0 ] && echo "Usage : gpi QUERY" && return 1
  ghs "$@" | peco | awk '{print $1}' | ghq import
}

function cl () {
  timestamp="`date | sed 's/JST //'`  `git config --get user.name`  <`git config --get user.email`>"
  gsed -i -e "1i $timestamp\n\n\t* " Changelog
  atom Changelog
}

function gsf() {
  /usr/bin/git svn fetch
}

function gsr() {
  /usr/bin/git svn rebase
}

function gsd() {
  /usr/bin/git svn dcommit
}
